{% extends "base.html" %}
{% block title %}Community{% endblock %}
{% block content %}
<h1>Community</h1>
<a href="{{ url_for('community.new_post') }}" class="btn btn-primary mb-3">New Post</a>
{% for post in posts %}
<div class="card mb-3">
    <div class="card-body">
        <h5><a href="{{ url_for('community.view_post', post_id=post.id) }}">{{ post.title }}</a></h5>
        <p>{{ post.body[:200] }}{% if post.body|length > 200 %}...{% endif %}</p>
        <small>by {{ post.user.username }} • {{ post.created_at.strftime('%b %d') }} • Score: {{ post.score }}</small>
        <form method="POST" action="{{ url_for('community.vote_post', post_id=post.id) }}" class="d-inline">
            <button name="value" value="1" class="btn btn-sm btn-outline-success">↑</button>
            <button name="value" value="-1" class="btn btn-sm btn-outline-danger">↓</button>
        </form>
    </div>
</div>
{% endfor %}
{% endblock %}