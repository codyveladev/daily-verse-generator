{% extends "base.html" %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
<div class="card">
    <div class="card-body">
        <h3>{{ post.title }}</h3>
        <p>{{ post.body }}</p>
        <small>by {{ post.user.username }} • {{ post.created_at.strftime('%b %d, %Y') }} • Score: {{ post.score }}</small>
        <form method="POST" action="{{ url_for('community.vote_post', post_id=post.id) }}" class="d-inline ms-3">
            <button name="value" value="1" class="btn btn-sm btn-outline-success">↑</button>
            <button name="value" value="-1" class="btn btn-sm btn-outline-danger">↓</button>
        </form>
    </div>
</div>

<h4 class="mt-4">Comments</h4>
<form method="POST" class="mb-4">
    <textarea name="body" class="form-control" rows="3" placeholder="Add a comment..." required></textarea>
    <button type="submit" class="btn btn-primary mt-2">Comment</button>
</form>

{% for comment in post.comments %}
<div class="card mb-2">
    <div class="card-body py-3">
        <p>{{ comment.body }}</p>
        <small>by {{ comment.user.username }} • Score: {{ comment.score }}</small>
        <form method="POST" action="{{ url_for('community.vote_comment', comment_id=comment.id) }}" class="d-inline ms-3">
            <button name="value" value="1" class="btn btn-sm btn-outline-success">↑</button>
            <button name="value" value="-1" class="btn btn-sm btn-outline-danger">↓</button>
        </form>
    </div>
</div>
{% endfor %}
{% endblock %}